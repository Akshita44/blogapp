(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{37:function(e,t,s){},39:function(e,t,s){},40:function(e,t,s){},47:function(e,t,s){},48:function(e,t,s){},49:function(e,t,s){},68:function(e,t,s){},69:function(e,t,s){},70:function(e,t,s){},71:function(e,t,s){},72:function(e,t,s){},73:function(e,t,s){"use strict";s.r(t);var a=s(1),c=s.n(a),n=s(30),r=s.n(n),i=(s(37),s(3)),l=s(2),o=s.n(l),j=s(6),u=(s(39),s(40),s.p,s(4)),p=s(5),b=s(0);var d=function(){var e,t=Object(a.useContext)(E),s=t.state,c=t.dispatch,n=Object(u.f)(),r=s.loc,i=function(){var e=Object(j.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/auth/logout",{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"},credentials:"include"});case 2:t=e.sent,console.log(t),200===t.status&&(c({type:"Logout"}),n.push("/login"));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(b.jsxs)("div",{className:"navbar",children:[Object(b.jsxs)("div",{className:"navleft",children:[Object(b.jsx)("span",{children:Object(b.jsx)("i",{class:"navicon fab fa-facebook-square"})}),Object(b.jsx)("span",{children:Object(b.jsx)("i",{class:"navicon fab fa-twitter-square"})}),Object(b.jsx)("span",{children:Object(b.jsx)("i",{class:"navicon fab fa-pinterest-square"})}),Object(b.jsx)("span",{children:Object(b.jsx)("i",{class:"navicon fab fa-instagram-square"})})]}),Object(b.jsx)("div",{className:"navcenter",children:Object(b.jsxs)("ul",{className:"navlist",children:[Object(b.jsxs)("li",{className:"navlistitem",children:[" ",Object(b.jsx)(p.b,{to:"/",className:"link",children:"HOME"})]}),Object(b.jsx)("li",{className:"navlistitem",children:Object(b.jsx)(p.b,{to:"/",className:"link",children:"BlOG"})}),Object(b.jsx)("li",{className:"navlistitem",children:s.user?Object(b.jsx)(p.b,{to:"/write",className:"link",children:"WRITE"}):Object(b.jsx)(p.b,{to:"/login",className:"link",children:"WRITE"})}),s.user?Object(b.jsx)("li",{className:"navlistitem",onClick:i,children:Object(b.jsx)(p.b,{to:"/login",className:"link",children:"LOGOUT"})}):Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("li",{className:"navlistitem",children:Object(b.jsx)(p.b,{to:"/login",className:"link",children:"LOGIN"})}),Object(b.jsx)("li",{className:"navlistitem",children:Object(b.jsx)(p.b,{to:"/register",className:"link",children:"REGISTER "})})]})]})}),Object(b.jsxs)("div",{className:"navright",children:[(null===(e=s.user)||void 0===e?void 0:e.profilepic)?Object(b.jsx)(p.b,{to:"/about",children:Object(b.jsx)("img",{src:r+s.user.profilepic,alt:"",className:"navimg"})}):Object(b.jsx)(p.b,{to:"/about",children:Object(b.jsx)("img",{src:"https://image.flaticon.com/icons/png/512/17/17004.png",alt:"",className:"navimg"})}),Object(b.jsx)("i",{class:"fas fa-search"})]})]})};s.p,s(47),s(48);var O=function(e){var t=Object(a.useContext)(E).state;console.log(e.post._id);var s=t.loc;return Object(b.jsxs)("div",{className:"post",children:[e.post.photo&&Object(b.jsx)(p.b,{to:"/singlepost/:".concat(e.post._id),children:Object(b.jsx)("img",{src:s+e.post.photo||e.post.photo,className:"postimg",alt:""})}),Object(b.jsxs)("div",{className:"postinfo",children:[Object(b.jsx)("div",{className:"postcats",children:e.post.categories.map((function(e){return Object(b.jsx)("span",{className:"postcat",children:e})}))}),Object(b.jsx)("span",{className:"posttitle",children:e.post.title}),Object(b.jsx)("p",{className:"postdate",children:new Date(e.post.createdAt).toDateString()})]}),Object(b.jsx)("p",{className:"postdesc",children:e.post.desc})]})},h=(s(49),s.p+"static/media/girl.18d2d071.jpg"),x=s(7),m=s.n(x);var f=function(){var e=Object(a.useState)([]),t=Object(i.a)(e,2),s=t[0],c=t[1];return Object(a.useEffect)((function(){var e=function(){var e=Object(j.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.get("/categories");case 2:t=e.sent,c(t.data),console.log(t.data);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[]),Object(b.jsxs)("div",{className:"sidebar",children:[Object(b.jsx)("span",{className:"sidetitle",children:"ABOUT ME"}),Object(b.jsx)("img",{src:h,className:"sideimg",alt:""}),Object(b.jsx)("p",{children:"Lorem ipsum dolor sit amet consectetur adipisicing elit. Quis perspiciatis nostrum possimus vitae quaerat deleniti iure nisi error quas"}),Object(b.jsx)("span",{className:"sidespan",style:{width:"60%"},children:"CATEGORIES"}),Object(b.jsx)("ul",{className:"categories",children:s.map((function(e){return Object(b.jsx)("li",{className:"categoriesitem",children:Object(b.jsx)(p.b,{to:"/?cat=".concat(e.name),className:"link",children:e.name[0].toUpperCase()+e.name.toLowerCase().slice(1)})})}))}),Object(b.jsx)("span",{className:"sidespan",children:"FOLLOW US"}),Object(b.jsxs)("div",{children:[Object(b.jsx)("span",{children:Object(b.jsx)("i",{class:"navicon fab fa-facebook-square"})}),Object(b.jsx)("span",{children:Object(b.jsx)("i",{class:"navicon fab fa-twitter-square"})}),Object(b.jsx)("span",{children:Object(b.jsx)("i",{class:"navicon fab fa-pinterest-square"})}),Object(b.jsx)("span",{children:Object(b.jsx)("i",{class:"navicon fab fa-instagram-square"})})]})]})};var g=function(){var e=Object(a.useState)([]),t=Object(i.a)(e,2),s=t[0],c=t[1],n=Object(u.g)().search;return Object(a.useEffect)((function(){var e=function(){var e=Object(j.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.get("/post/".concat(n));case 2:t=e.sent,console.log(t.data),c(t.data);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[n]),console.log(s),Object(b.jsxs)("div",{className:"homepage",children:[Object(b.jsxs)("div",{className:"headertitle",children:[Object(b.jsx)("span",{className:"headersm",children:"React & Node"}),Object(b.jsx)("span",{className:"headerlg",children:"BLOG"})]}),Object(b.jsx)("img",{src:"https://images.pexels.com/photos/6469/red-hands-woman-creative.jpg?auto=compress&cs=tinysrgb&dpr=2&w=500",className:"homeimg",alt:""}),Object(b.jsxs)("div",{className:"homeposts",children:[Object(b.jsx)("div",{className:"homepost",children:s.map((function(e){return Object(b.jsx)(O,{post:e})}))}),Object(b.jsx)(f,{})]})]})},v=s(13);s(68);var N=function(e){var t,s,c=Object(a.useState)({}),n=Object(i.a)(c,2),r=n[0],l=n[1],d=Object(a.useState)(""),O=Object(i.a)(d,2),h=O[0],x=O[1],g=Object(a.useState)(!1),N=Object(i.a)(g,2),w=N[0],y=N[1],k=Object(a.useContext)(E).state,C=Object(a.useRef)(null),S=Object(a.useRef)(null),F=Object(a.useRef)(null),R=Object(u.g)(),L=Object(u.f)(),U=R.pathname.split("/")[2].slice(1),D=k.loc;console.log(U),Object(a.useEffect)((function(){var e=function(){var e=Object(j.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.get("/post/".concat(U));case 2:t=e.sent,l(t.data),console.log(t.data);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[U]);try{k.user.then((function(e){x(e.username)}))}catch(A){}var T=function(){var e=Object(j.a)(o.a.mark((function e(t){var s,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),s=Object(v.a)(Object(v.a)({},r),{},{title:C.current.value,desc:S.current.value,categories:[F.current.value]}),e.next=4,m.a.put("/post/".concat(U),s);case 4:a=e.sent,console.log(a.data),alert("Post is Updated!!"),L.push("/");case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),P=function(){var e=Object(j.a)(o.a.mark((function e(t){var s,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),s={username:r.username},e.next=4,m.a.delete("/post/delete/".concat(U),{data:s});case 4:a=e.sent,console.log(a.data),L.push("/");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return console.log(D+r.photo),console.log(r.username===(null===(t=k.user)||void 0===t?void 0:t.username)),console.log(r.username),Object(b.jsxs)("div",{className:"singlepost",children:[Object(b.jsxs)("div",{className:"singlepostwrapper",children:[r.photo&&Object(b.jsx)("img",{src:D+r.photo||r.photo,className:"singlepostimg",alt:""}),w?Object(b.jsxs)("div",{className:"updatediv",children:[Object(b.jsx)("input",{type:"text",className:"titlesinglepost",autoFocus:!0,ref:C,placeholder:r.title}),Object(b.jsxs)("div",{className:"singlepostinfo",children:[Object(b.jsxs)("span",{children:["Author: ",r.username]}),Object(b.jsx)("span",{children:new Date(r.createdAt).toDateString()})]}),Object(b.jsx)("input",{type:"text",className:"catsinglepost",autoFocus:!0,ref:F,placeholder:"Add a category"}),Object(b.jsx)("textarea",{className:"descsinglepost",placeholder:r.desc,ref:S}),Object(b.jsx)("button",{className:"Updatebtn",onClick:T,children:"Update"})]}):Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)("h1",{className:"singleposttitle",children:[r.title,(r.username===(null===(s=k.user)||void 0===s?void 0:s.username)||r.username===h)&&Object(b.jsxs)("div",{className:"singlepostedit",children:[Object(b.jsx)("i",{class:"far fa-edit",onClick:function(e){return y(!0)}}),Object(b.jsx)("i",{class:"far fa-trash-alt",onClick:P})]})]}),Object(b.jsxs)("div",{className:"singlepostinfo",children:[Object(b.jsx)(p.b,{to:"/?user=".concat(r.username),className:"link",children:Object(b.jsxs)("span",{children:["Author: ",r.username]})}),Object(b.jsx)("span",{children:new Date(r.createdAt).toDateString()})]}),Object(b.jsx)("p",{className:"singlepostdesc",children:r.desc})]})]}),Object(b.jsx)(f,{})]})};s(69);var w=function(){var e=Object(a.useContext)(E).state,t=Object(a.useState)(""),s=Object(i.a)(t,2),c=s[0],n=s[1],r=Object(a.useState)(""),l=Object(i.a)(r,2),p=l[0],d=l[1],O=Object(a.useState)(""),h=Object(i.a)(O,2),x=h[0],f=h[1],g=Object(a.useState)(""),v=Object(i.a)(g,2),N=v[0],w=v[1],y=Object(a.useState)(""),k=Object(i.a)(y,2),C=k[0],S=k[1],F=Object(u.f)(),R=e.user.username||C.username,L=function(){var e=Object(j.a)(o.a.mark((function e(t){var s,a,n,r,i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,m.a.post("/categories",{name:p});case 4:s=e.sent,console.log(s.data),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(1);case 10:if(a={username:R,title:c,desc:x,categories:[p]},!N){e.next=25;break}return n=new FormData,console.log(n),r=Date.now()+N.name,n.append("name",r),n.append("file",N),a.photo=r,e.prev=18,e.next=21,m.a.post("/upload",n);case 21:e.next=25;break;case 23:e.prev=23,e.t1=e.catch(18);case 25:return e.next=27,m.a.post("/post/",a);case 27:i=e.sent,console.log(i.status),201===i.status&&F.push("/");case 30:case"end":return e.stop()}}),e,null,[[1,8],[18,23]])})));return function(t){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){try{e.user.then((function(e){S(e)}))}catch(t){}}),[]),Object(b.jsxs)("div",{children:[N&&Object(b.jsx)("img",{src:URL.createObjectURL(N),className:"writeimg",alt:""}),Object(b.jsxs)("form",{className:"writeform",children:[Object(b.jsxs)("div",{className:"writeFormGroup",children:[Object(b.jsx)("label",{htmlFor:"addfile",children:Object(b.jsx)("i",{class:"writeicon fas fa-plus"})}),Object(b.jsx)("input",{type:"file",id:"addfile",style:{display:"none"},onChange:function(e){w(e.target.files[0])}}),Object(b.jsx)("input",{type:"text",placeholder:"Title",className:"writeinput",autoFocus:!0,onChange:function(e){n(e.target.value)}})]}),Object(b.jsxs)("div",{className:"writeFormGroups",children:[Object(b.jsx)("input",{type:"text",className:"writeinputcat",placeholder:"Add a Category",autoFocus:!0,onChange:function(e){d(e.target.value)}}),Object(b.jsx)("textarea",{type:"text",placeholder:"Tell your story...",className:"writeinput writetext",onChange:function(e){f(e.target.value)}})]}),Object(b.jsx)("button",{type:"submit",className:"writebutton",onClick:L,children:"Publish"})]})]})};s(70);var y=function(){var e,t,s=Object(a.useContext)(E),c=s.state,n=s.dispatch,r=Object(u.f)(),l=Object(a.useState)(""),p=Object(i.a)(l,2),d=p[0],O=p[1],h=Object(a.useState)(""),x=Object(i.a)(h,2),g=x[0],v=x[1],N=Object(a.useState)(""),w=Object(i.a)(N,2),y=w[0],k=w[1],C=Object(a.useState)(""),S=Object(i.a)(C,2),F=S[0],R=S[1],L=null===(e=c.user)||void 0===e?void 0:e._id,U=function(){var e=Object(j.a)(o.a.mark((function e(t){var s,a,c,i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),s={username:d,email:g,password:y,_id:L},!F){e.next=16;break}return a=new FormData,console.log(a),c=Date.now()+F.name,a.append("name",c),a.append("file",F),s.profilepic=c,e.prev=9,e.next=12,m.a.post("/upload",a);case 12:e.next=16;break;case 14:e.prev=14,e.t0=e.catch(9);case 16:return e.next=18,m.a.put("/auth/update/".concat(L),s);case 18:i=e.sent,console.log(i),console.log(i.data),200===i.status?(n({type:"Update",payload:i.data}),r.push("/")):400===i.status&&alert("Fill the credentials");case 22:case"end":return e.stop()}}),e,null,[[9,14]])})));return function(t){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){c.user||r.push("/login")}),[c]);var D=c.loc;return Object(b.jsxs)("div",{className:"settings",children:[Object(b.jsxs)("div",{className:"settingsWrapper",children:[Object(b.jsx)("div",{className:"settingsheadings",children:Object(b.jsx)("span",{className:"settingsupdate",children:"Update Your Account"})}),Object(b.jsxs)("form",{className:"settingsform",children:[Object(b.jsx)("label",{children:"Profile Picture"}),Object(b.jsxs)("div",{className:"settingspp",children:[F?Object(b.jsx)("img",{src:URL.createObjectURL(F),className:"profileimg",alt:""}):Object(b.jsx)("img",{src:D+(null===(t=c.user)||void 0===t?void 0:t.profilepic)||"https://image.flaticon.com/icons/png/512/17/17004.png",className:"profileimg",alt:""}),Object(b.jsx)("label",{htmlFor:"profileimgchange",children:Object(b.jsx)("i",{class:" settingspimg far fa-user-circle"})}),Object(b.jsx)("input",{type:"file",id:"profileimgchange",style:{display:"none"},onChange:function(e){R(e.target.files[0])}})]}),Object(b.jsx)("label",{htmlFor:"",children:"Username"}),Object(b.jsx)("input",{type:"text",placeholder:"Username",onChange:function(e){O(e.target.value)}}),Object(b.jsx)("label",{htmlFor:"",children:"Email"}),Object(b.jsx)("input",{type:"text",placeholder:"Email",onChange:function(e){v(e.target.value)}}),Object(b.jsx)("label",{htmlFor:"",children:"Password"}),Object(b.jsx)("input",{type:"password",placeholder:"Password",onChange:function(e){k(e.target.value)}}),Object(b.jsx)("button",{type:"submit",className:"settingsbutton",onClick:U,children:"Update"})]})]}),Object(b.jsx)(f,{})]})};s(71);var k=function(){var e=Object(a.useContext)(E).dispatch,t=Object(a.useState)(""),s=Object(i.a)(t,2),c=s[0],n=s[1],r=Object(a.useState)(""),l=Object(i.a)(r,2),d=l[0],O=l[1],h=Object(u.f)(),x=function(){var t=Object(j.a)(o.a.mark((function t(s){var a;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,s.preventDefault(),t.next=4,m.a.post("/auth/login",{email:c,password:d});case 4:a=t.sent,console.log(a),a&&201===a.status?(alert("User Logged In"),e({type:"Login",payload:a.data}),h.push("/")):alert("Invalid Credentials"),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),alert("Invalid Details");case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}();return Object(b.jsx)("div",{className:"loginpage",children:Object(b.jsxs)("form",{className:"loginform",children:[Object(b.jsx)("h1",{className:"logintitle",children:"Login"}),Object(b.jsx)("label",{htmlFor:"",children:"Email"}),Object(b.jsx)("input",{type:"text",placeholder:"Email",onChange:function(e){n(e.target.value)}}),Object(b.jsx)("label",{htmlFor:"",children:"Password"}),Object(b.jsx)("input",{type:"password",placeholder:"Password",onChange:function(e){O(e.target.value)}}),Object(b.jsx)("button",{type:"button",className:"loginbutton",onClick:x,children:"Login"}),Object(b.jsx)(p.b,{to:"/register",className:"registerbutton",children:"Register"})]})})};s(72);var C=function(){var e=Object(a.useState)(""),t=Object(i.a)(e,2),s=t[0],c=t[1],n=Object(a.useState)(""),r=Object(i.a)(n,2),l=r[0],d=r[1],O=Object(a.useState)(""),h=Object(i.a)(O,2),x=h[0],f=h[1],g=Object(u.f)(),v=function(){var e=Object(j.a)(o.a.mark((function e(t){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t.preventDefault(),e.next=4,m.a.post("/auth/register",{username:s,email:l,password:x});case 4:a=e.sent,console.log(a),a&&201===a.status?(alert("User Registered"),g.push("/login")):alert("Invalid Credentials"),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),alert("Invalid Details");case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}();return Object(b.jsx)("div",{className:"Registerpage",children:Object(b.jsxs)("form",{className:"Registerform",children:[Object(b.jsx)("h1",{className:"Registertitle",children:"Register"}),Object(b.jsx)("label",{htmlFor:"",children:"Username"}),Object(b.jsx)("input",{type:"text",placeholder:"Username",onChange:function(e){c(e.target.value)}}),Object(b.jsx)("label",{htmlFor:"",children:"Email"}),Object(b.jsx)("input",{type:"text",placeholder:"Email",onChange:function(e){d(e.target.value)}}),Object(b.jsx)("label",{htmlFor:"",children:"Password"}),Object(b.jsx)("input",{type:"password",placeholder:"Password",onChange:function(e){f(e.target.value)}}),Object(b.jsx)("button",{type:"submit",className:"Registerbutton",onClick:v,children:"Register"}),Object(b.jsx)(p.b,{to:"/login",className:"loginlink",children:"Login"})]})})},S={user:null,loc:null},F=function(e,t){return"Login"===t.type?Object(v.a)(Object(v.a)({},e),{},{user:t.payload}):"Set"===t.type?{user:t.payload.user,loc:t.payload.add}:"Update"===t.type?Object(v.a)(Object(v.a)({},e),{},{user:t.payload}):"Logout"===t.type?Object(v.a)(Object(v.a)({},e),{},{user:null}):e},E=c.a.createContext();var R=function(){var e=function(){var e=Object(j.a)(o.a.mark((function e(){var t,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/auth/getdata",{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"},credentials:"include"});case 2:if(200!==(t=e.sent).status){e.next=8;break}return e.next=6,t.json();case 6:s=e.sent,n({type:"Set",payload:{user:s,add:document.URL}});case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){e()}),[]);var t=Object(a.useReducer)(F,S),s=Object(i.a)(t,2),c=s[0],n=s[1];return console.log(c),Object(b.jsx)(b.Fragment,{children:Object(b.jsx)(E.Provider,{value:{state:c,dispatch:n},children:Object(b.jsxs)(p.a,{children:[Object(b.jsx)(d,{}),Object(b.jsxs)(u.c,{children:[Object(b.jsx)(u.a,{exact:!0,path:"/",children:Object(b.jsx)(g,{})}),Object(b.jsx)(u.a,{exact:!0,path:"/write",children:Object(b.jsx)(w,{})}),Object(b.jsx)(u.a,{exact:!0,path:"/login",children:Object(b.jsx)(k,{})}),Object(b.jsx)(u.a,{exact:!0,path:"/register",children:Object(b.jsx)(C,{})}),Object(b.jsx)(u.a,{exact:!0,path:"/about",children:Object(b.jsx)(y,{})}),Object(b.jsx)(u.a,{exact:!0,path:"/singlepost/:id",children:Object(b.jsx)(N,{})})]})]})})})},L=function(e){e&&e instanceof Function&&s.e(3).then(s.bind(null,74)).then((function(t){var s=t.getCLS,a=t.getFID,c=t.getFCP,n=t.getLCP,r=t.getTTFB;s(e),a(e),c(e),n(e),r(e)}))};r.a.render(Object(b.jsx)(c.a.StrictMode,{children:Object(b.jsx)(R,{})}),document.getElementById("root")),L()}},[[73,1,2]]]);
//# sourceMappingURL=main.41b8451c.chunk.js.map